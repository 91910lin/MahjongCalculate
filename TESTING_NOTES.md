# 測試說明

## 台灣麻將規則

台灣麻將與一般麻將的重要區別：

### 牌數規則
- **玩家手牌固定 16 張**（遊戲進行中）
- **胡牌時為 17 張** = 16張手牌 + 1張胡張
- **牌型結構** = 5個面子（每個3張）+ 1個對子（2張）= 17張

這與標準麻將不同：
- 標準麻將：13張手牌 + 1張胡張 = 14張 = 4面子 + 1對子
- 台灣麻將：16張手牌 + 1張胡張 = 17張 = 5面子 + 1對子

### 副露規則
- 副露（吃、碰、槓）的牌也計入16張
- 例如：有1個碰（3張），則暗牌為 13 張，總計 13 + 3 = 16 張
- 胡牌時：16張 + 1張胡張 = 17張

### 七對子
- 七對子是特殊牌型：7個對子 = 14張
- 七對子不可有副露
- 這是台灣麻將中少數不是17張的胡牌型態

## 測試案例設計

所有測試用例必須遵循以下原則：

1. **一般胡牌**：16張暗牌 + 1張胡張 = 17張
2. **有副露胡牌**：暗牌 + 副露牌數 = 16張，加胡張 = 17張
3. **七對子**：13張暗牌（6對 + 1張）+ 1張胡張 = 14張（7對）

## 測試修復記錄

### 問題
初始測試用例使用了錯誤的牌數（13張），這是標準麻將的規則，不適用於台灣麻將。

### 解決方案
將所有測試用例修正為：
- 一般胡牌：16張暗牌
- 碰碰胡：5個刻子（15張）+ 1個對子（1張等胡1張）= 16張
- 有副露：暗牌 + 副露 = 16張

### 範例

```typescript
// 正確：16張暗牌
const counts = new Array(34).fill(0)
counts[0] = 3  // 1萬x3 (刻子)
counts[1] = 3  // 2萬x3 (刻子)
counts[2] = 3  // 3萬x3 (刻子)
counts[3] = 3  // 4萬x3 (刻子)
counts[4] = 3  // 5萬x3 (刻子)
counts[5] = 1  // 6萬x1 (等對子)
// 總計：15 + 1 = 16張

checkWinning(counts, [], 5) // 胡6萬，變17張
```

## 執行測試

```bash
npm test
```

所有測試應該通過，驗證：
- 胡牌判定正確
- 副露支援正確
- 計台系統正確
- 聽牌計算正確
